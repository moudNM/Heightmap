/*
Student Name: Nur Muhammad Bin Khameed
 SRN: 160269044
 CO3355 Advanced Graphics and Animation CW1
 Part A, Question 1
 
 Instructions:
 Press 'w' key for top view or 's' for front view (elevated)
 */

import peasy.*;


float heightMap[][]= {{  7.421133, 12.722703, 15.648739, 4.047623, 9.623825, 5.519293, 2.130456, 10.160015, 8.168139, 6.014825, 6.324741, 4.736892, 12.560449, 19.286133, 14.614135, 1.440069, 12.017515, 15.955330, 16.728313, 0.536702, 12.503568, 9.926942, 9.645764, 3.712585, 10.635527, 6.295094, 17.185339, 7.742638, 2.634530, 6.065592 }, 
  {6.125013, 14.551839, 4.078741, 1.731009, 19.232089, 18.505727, 19.503670, 4.099541, 17.796608, 13.222834, 2.643279, 11.352192, 9.296356, 3.940780, 3.086126, 5.322525, 0.160258, 3.250885, 14.433269, 1.319530, 6.861893, 17.088876, 13.304542, 15.763069, 9.725523, 4.138764, 15.221181, 15.646904, 3.763218, 8.914971 }, 
  {4.247351, 19.624512, 1.269028, 7.253105, 12.901878, 3.787572, 14.459361, 0.246383, 9.676500, 12.826159, 16.821383, 6.206373, 17.897724, 18.362892, 2.356028, 11.731584, 15.433194, 12.881578, 10.667622, 14.590261, 16.042314, 9.149593, 15.549083, 19.267555, 19.314408, 7.891358, 10.243657, 12.011380, 13.242069, 8.293732 }, 
  {0.988217, 5.802312, 4.399814, 12.118350, 8.324885, 0.692879, 1.915590, 14.563599, 18.449385, 16.935716, 7.130256, 14.020934, 0.057330, 17.372959, 10.565605, 7.040626, 18.522396, 1.571248, 2.328809, 9.642673, 16.936723, 10.715232, 13.170438, 9.729757, 14.392362, 19.701999, 14.583185, 6.466894, 6.254393, 16.428880 }, 
  {7.132307, 1.679912, 17.630687, 15.017308, 11.001658, 8.968322, 2.845410, 13.334408, 16.768065, 18.986040, 5.068180, 15.065988, 19.080213, 1.294761, 15.356336, 1.324041, 16.343175, 19.111394, 7.398838, 4.337369, 12.158315, 8.340518, 4.163854, 11.240385, 8.685726, 0.467476, 9.593994, 11.418414, 17.537334, 13.522140 }, 
  {13.809971, 3.061336, 3.669504, 16.842515, 4.473194, 4.307165, 19.027339, 7.581690, 3.965298, 19.354116, 0.147296, 11.623423, 5.046468, 12.813187, 17.355203, 9.682891, 14.048738, 7.259501, 10.697947, 1.995794, 6.548867, 17.128398, 1.753647, 2.745213, 16.796180, 12.297827, 3.440399, 18.916499, 16.047487, 15.204479 }, 
  {9.767159, 19.590321, 6.329819, 4.576093, 8.675572, 18.427274, 16.737432, 16.332933, 9.096641, 17.324977, 9.142715, 15.393811, 18.820435, 12.339831, 12.224507, 0.850998, 17.868479, 14.510112, 16.652543, 12.064426, 19.419763, 10.448614, 2.862164, 5.172073, 5.194286, 8.279950, 19.698018, 16.076514, 7.153895, 2.130466 }, 
  {6.309917, 18.316533, 13.233170, 2.611221, 16.274990, 17.458532, 6.308154, 12.982951, 13.780729, 11.541998, 13.288400, 18.337255, 8.592252, 8.932077, 15.456285, 4.066397, 5.999256, 10.012730, 4.001456, 4.242223, 13.049434, 15.720166, 3.546990, 10.050452, 9.208365, 2.602668, 4.527708, 19.341947, 12.167999, 2.020772 }, 
  {3.277384, 18.756922, 12.663775, 1.682350, 1.308723, 14.566200, 8.703561, 19.936820, 14.781607, 8.313238, 1.448009, 10.823305, 5.176260, 13.474847, 7.112565, 5.197640, 7.311239, 11.403075, 1.089242, 16.952425, 1.311103, 13.701206, 0.290418, 3.897969, 8.342981, 3.472344, 19.851343, 6.792582, 19.634211, 8.958060 }, 
  {6.900131, 10.126626, 9.912030, 15.666796, 11.151448, 4.988616, 10.458950, 2.038462, 18.935581, 19.604852, 11.436800, 19.795888, 15.713284, 19.689297, 18.477947, 13.971642, 12.482277, 5.915540, 1.097461, 10.235743, 18.920720, 13.407370, 8.884231, 9.946191, 17.894739, 13.253710, 18.358085, 19.449539, 7.597839, 11.228372 }, 
  {19.987144, 4.084019, 9.706119, 14.754683, 5.326594, 5.116836, 17.544466, 13.445105, 16.259246, 0.859766, 14.081377, 9.166540, 15.517620, 2.687342, 1.691650, 6.539339, 2.557205, 5.604453, 7.276606, 8.698917, 0.853068, 5.660290, 0.938166, 15.011610, 13.256925, 11.086017, 14.938803, 13.487545, 10.762840, 18.025561 }, 
  {1.366444, 18.247166, 6.288947, 11.351949, 12.602128, 1.909654, 18.415223, 19.559685, 8.308960, 9.419627, 13.169078, 0.802121, 14.983722, 0.486948, 0.316467, 12.929643, 18.248846, 9.320315, 11.193859, 0.803989, 5.671975, 19.092046, 2.193622, 18.907126, 1.953884, 16.688616, 4.099232, 14.831799, 1.061043, 4.986929 }, 
  {15.329132, 3.386604, 19.911735, 17.062336, 14.530790, 10.407285, 7.808744, 17.323418, 9.817353, 4.622810, 10.315221, 5.010087, 19.087204, 2.166953, 0.815035, 9.075943, 16.574087, 3.321402, 7.503388, 6.917109, 17.282927, 7.488727, 17.621191, 18.428842, 15.050166, 11.116800, 1.366718, 15.736034, 3.084821, 12.743041 }, 
  {2.102198, 19.644859, 12.696782, 8.448687, 3.901493, 0.642135, 17.587032, 17.538477, 9.481909, 19.951458, 16.276956, 1.740096, 2.954327, 0.908371, 12.448921, 12.637046, 0.913053, 0.094978, 14.977683, 13.725415, 8.228277, 17.847006, 7.461664, 0.204513, 2.096662, 12.416592, 16.172185, 14.821390, 12.854519, 7.854209 }, 
  {11.779104, 19.525152, 0.242205, 18.326046, 4.400195, 5.022739, 11.549802, 17.402471, 3.049245, 15.790964, 10.645237, 9.422863, 1.039629, 5.187844, 3.083528, 5.404585, 3.320694, 16.144873, 7.238435, 15.036709, 19.613137, 17.542266, 3.556125, 5.196993, 10.548918, 2.046789, 8.366188, 3.434589, 1.370367, 18.804320 }, 
  {8.013849, 2.391223, 12.618002, 12.669626, 6.481816, 18.985446, 6.979841, 12.661111, 15.513746, 8.705531, 3.944870, 6.396680, 12.608101, 13.279960, 11.304575, 12.198238, 5.970745, 16.819497, 18.519478, 13.788777, 14.661777, 0.811423, 4.554494, 19.951059, 15.243672, 18.037608, 11.237150, 10.512954, 4.967463, 11.140765 }, 
  {13.271979, 11.744584, 18.081790, 15.851861, 11.066255, 11.499691, 15.225918, 11.540158, 9.442105, 4.064562, 6.881909, 17.546488, 1.957282, 3.629830, 3.759229, 10.222367, 2.116307, 17.968577, 16.028657, 16.523170, 11.797531, 6.566709, 18.234339, 19.936512, 18.451036, 13.428159, 4.386153, 1.518958, 3.777859, 10.536689 }, 
  {15.351399, 7.239581, 9.084920, 13.344795, 11.485976, 16.450556, 0.952666, 2.135327, 7.657067, 4.043853, 1.432315, 9.627797, 5.851187, 0.480093, 9.564482, 9.503916, 1.420853, 10.052556, 6.580320, 18.967137, 14.208027, 3.135123, 15.942524, 8.669489, 14.296660, 13.777158, 15.546079, 12.109863, 14.949369, 3.524879 }, 
  {19.821610, 5.292486, 10.127378, 3.741379, 7.420316, 16.783425, 3.324574, 1.539932, 2.535131, 13.373368, 2.460990, 1.980024, 11.653154, 1.387922, 19.166422, 19.517595, 13.546065, 2.582983, 6.730784, 6.185182, 6.414618, 5.462263, 8.215819, 0.676534, 8.250414, 15.182070, 0.207219, 19.542292, 12.226566, 14.935657 }, 
  {7.108653, 6.362278, 8.000782, 1.648140, 11.584991, 4.032997, 11.226604, 7.774561, 7.022515, 11.958965, 8.092855, 7.107374, 16.516439, 11.250570, 14.777626, 2.307056, 9.397568, 13.117475, 2.016349, 2.308711, 15.981033, 16.332112, 7.063033, 3.281099, 0.343303, 19.136488, 2.804298, 19.293038, 18.585088, 12.796776 }, 
  {4.730889, 15.816563, 6.550965, 11.802469, 15.994882, 3.779353, 6.164880, 14.884393, 5.858687, 5.661361, 4.366359, 14.852543, 2.678413, 2.616576, 18.732953, 8.085071, 1.609054, 4.887197, 16.891626, 3.704924, 17.988007, 10.690247, 9.789984, 16.152271, 8.165893, 8.572208, 16.033794, 13.691139, 2.757725, 13.094304 }, 
  {10.443166, 0.811556, 3.637914, 14.823938, 2.678965, 14.852964, 5.461968, 10.173198, 14.614196, 15.793486, 14.747799, 0.417013, 17.736081, 10.608240, 18.957273, 2.568481, 9.639098, 16.327273, 2.768092, 9.458442, 10.968970, 5.744819, 11.991604, 19.225017, 13.755055, 17.757842, 2.738004, 3.563720, 1.344579, 1.747629 }, 
  {1.849819, 6.304372, 14.549312, 8.510315, 11.385809, 6.555120, 14.992389, 1.367642, 7.727439, 12.447376, 4.832194, 5.811941, 19.526085, 12.559353, 6.916049, 18.637691, 14.587685, 13.454359, 5.759823, 4.731684, 17.689369, 12.497513, 12.979055, 10.246633, 12.218972, 4.135812, 6.840397, 4.617178, 13.716918, 7.586999 }, 
  {18.438139, 7.925998, 5.611039, 17.938256, 13.805254, 1.371565, 19.468175, 6.843389, 13.238072, 13.707695, 18.437031, 16.009933, 19.276410, 13.532241, 8.457819, 16.692134, 0.775453, 4.190999, 14.337538, 6.083824, 17.188315, 11.708589, 8.236009, 14.259943, 7.830933, 10.393334, 18.971613, 16.725734, 14.192118, 7.589815 }, 
  {4.963557, 0.446695, 3.979231, 5.276015, 4.077039, 14.965674, 6.099623, 13.303384, 3.987073, 11.989521, 0.241651, 8.228795, 9.508980, 0.572369, 18.452557, 8.663684, 18.030616, 12.020840, 18.986262, 1.951250, 12.149244, 6.676847, 4.158742, 12.206432, 10.035960, 15.954713, 1.780293, 8.081321, 11.575251, 3.537478 }, 
  {9.074573, 8.975513, 4.617124, 15.306208, 16.230467, 16.543148, 15.187850, 1.534048, 9.204225, 0.098953, 11.622886, 0.127524, 11.754558, 18.977342, 9.743700, 8.774624, 5.615342, 7.675072, 4.460500, 11.266590, 13.842605, 14.067821, 0.862823, 5.330625, 10.009452, 15.041594, 9.133782, 12.079661, 8.146034, 2.183076 }, 
  {3.933917, 10.817464, 5.117028, 11.988426, 17.857711, 18.806184, 0.016230, 11.342629, 5.938690, 0.078207, 18.855060, 8.285374, 6.260519, 0.772442, 3.496574, 14.641041, 0.776100, 17.111739, 18.368555, 2.886763, 1.036149, 10.930745, 8.012621, 1.884768, 14.486013, 1.315967, 6.728398, 10.576038, 5.208444, 4.191290 }, 
  {9.710915, 10.503462, 1.847861, 6.753046, 6.207852, 2.684697, 0.763309, 7.455544, 19.787798, 4.372594, 8.305385, 18.176996, 14.440735, 10.821107, 19.235944, 10.690356, 14.229099, 15.115630, 18.481003, 3.829244, 16.438933, 6.954242, 7.684247, 2.973254, 8.341046, 10.235665, 13.701642, 9.539210, 8.164282, 9.126411 }, 
  {9.342593, 14.051330, 12.390079, 6.454963, 19.828200, 0.208084, 18.446350, 5.595540, 18.960978, 19.816653, 12.859609, 11.064662, 16.248972, 0.586956, 6.883254, 13.876143, 13.986581, 5.882280, 2.335667, 6.702199, 5.727758, 17.958922, 0.355724, 4.458533, 11.858942, 19.852371, 15.003923, 11.640523, 10.279765, 18.059208 }, 
  {16.287914, 17.824552, 16.626633, 8.276109, 13.080412, 3.917305, 4.281737, 19.599634, 15.431310, 14.944588, 17.618003, 15.886928, 5.910398, 5.447897, 16.337324, 3.950252, 5.121900, 4.777336, 7.605853, 1.369763, 6.452843, 6.371427, 18.043947, 15.863245, 6.865269, 18.647837, 6.270087, 8.560096, 1.823622, 18.412401 }}; 


float spacing = 20.0; // Use this variable to set the spacing between heightmap elements
PeasyCam cam;
float startXY;
PShape shape;
int camPos; //camera modes

void setup()
{
  size(640, 480, P3D);  

  cam = new PeasyCam(this, 100);
  cam.setMinimumDistance(50);
  cam.setMaximumDistance(500);
  startXY = (heightMap.length * spacing)/2;    // This is to recentre the heightmap
}

void draw()
{
  background(255);
  //controls camera position
  cameraPosition(camPos);
  //Heightmap is drawn here
  shape = createShape();
  shape.beginShape(QUAD);
  for (int x=1; x<heightMap.length; x++) {
    for (int y=1; y<heightMap[x].length; y++) {

      //This will ensure that the sides touch each other, resulting in a quad mesh
      shape.vertex(spacing*(x), -heightMap[x-1][y-1], -spacing*(y));
      shape.vertex(spacing*(x)+spacing, -heightMap[x][y-1], -spacing*(y));
      shape.vertex(spacing*(x)+spacing, -heightMap[x][y], -spacing*(y)-spacing);
      shape.vertex(spacing*(x), -heightMap[x-1][y], -spacing*(y)-spacing);
    }
  }
  shape.endShape();
  shape(shape);
}

//this lets user switch between top view and elevated front view
void keyReleased() {
  if (key == 's') {
    cam = new PeasyCam(this, 100);
    camPos = 0;
  } else if (key == 'w') {
    cam = new PeasyCam(this, 100);
    camPos = 1;
  }
}

//switches the view
void cameraPosition(int camPos) {
  switch(camPos) {
  case 0:
    rotateX(-PI/4);
    translate(-startXY, 3*startXY/2, -startXY/2);
    break;
  case 1:
    rotateX(-PI/2);
    translate(-startXY, startXY*2, startXY);
    break;
  }
}
